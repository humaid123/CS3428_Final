
<html>
<head>
    <script src="./client.js"></script>
    <script src="./jquery-3.4.1.min.js"></script>
<script>
const email = "test1", password="hi";
const specialistEmail = email+"Specialist";
    function genericFunction(err, result, div) {
        if (err) {
            document.getElementById(div).innerHTML = JSON.stringify(err);
            return;
        }
        document.getElementById(div).innerHTML = JSON.stringify(result);
    }

function createStudent() {
    const secret = "MANIPULATE";
    const isSpecialist = false;
    createAccount(email, password, secret, isSpecialist, (err, result) => {
        genericFunction(err, result, "createStudentResult");
    });
}

function createSpecialist() {
    const secret = "MANIPULATE";
    const isSpecialist = true;
    createAccount(specialistEmail, password, secret, 
        isSpecialist, (err, result) => {
        genericFunction(err, result, "createSpecialistResult");
    });
}


function loginStudent() {
    login(email, password, (err, result) => {
        genericFunction(err, result, "loginStudentResult");
        const json = {email, token: result.token};
        localStorage.setItem("user", JSON.stringify(json));
    });
}

function writeEmail() {
    const newEmail = {
        to: specialistEmail,
        cc: [specialistEmail],
        subject: "testSubject",
        body: "testBody",
    };
    storeNewEmailOnServer(newEmail, (err, result) => {
        genericFunction(err, result, "writeEmailStudentResult");
    });
}


function getStudentInbox() {
    getEmailsFromServer(true, (err, result) => {
        genericFunction(err, result, "getStudentInboxResult");
    });
}

function getStudentSentItems() {
    getEmailsFromServer(false, (err, result) => {
        genericFunction(err, result, "getStudentSentItemsResult");
    });
}

function changeUrgency() {
    const isInbox = false;
    const index = 0;
    changeUrgencyInServer(isInbox, index, (err, result) => {
        genericFunction(err, result, "changeUrgencyResult");
    });
}

function viewEmail() {
    const isInbox = false;
    const index = 0;
    viewEmailFromServer(isInbox, index, (err, result) => {
        genericFunction(err, result, "viewEmailResult");
    });
}

function deleteEmail() {
    const isInbox = false;
    const index = 0;
    deleteEmailFromServer(isInbox, index, (err, result) => {
        genericFunction(err, result, "deleteEmailResult");
    });
}

function deleteAccount() {
    const emailToDelete = email;
    const secret = "MANIPULATE";
    deleteAccountFromDB(emailToDelete, secret, (err, result) => {
        genericFunction(err, result, "deleteAccountResult");
    });
}


</script>
</head>
<body>
    <h1>Creating Account-Student</h1>
    <input type="button" value="createStudent" onclick="createStudent()">
    <div id="createStudentResult"></div>


    <h1>Creating Account-Specialist</h1>
    <input type="button" value="createSpecialist" onclick="createSpecialist()">
    <div id="createSpecialistResult"></div>

    <h1>Logging in Student</h1>
    <input type="button" value="loginStudent" onclick="loginStudent()">
    <div id="loginStudentResult"></div>

    <h1>write Email from student to admin</h1>
    <input type="button" value="writeEmailStudent" onclick="writeEmail()">
    <div id="writeEmailStudentResult"></div>

    <h1>get emails - student inbox</h1>
    <input type="button" value="getStudentInbox" onclick="getStudentInbox()">
    <div id="getStudentInboxResult"></div>

    <h1>get emails - student Sent items</h1>
    <input type="button" value="getStudentSent" onclick="getStudentSentItems()">
    <div id="getStudentSentItemsResult"></div>

    <h1>change urgency email</h1>
    <input type="button" value="changeUrgency" onclick="changeUrgency()">
    <div id="changeUrgencyResult"></div>

    <h1>View Email</h1>
    <input type="button" value="viewEmail" onclick="viewEmail()">
    <div id="viewEmailResult"></div>

    <h1>delete email - student inbox</h1>
    <input type="button" value="deleteEmail" onclick="deleteEmail()">
    <div id="deleteEmailResult"></div>

    <h1>delete account</h1>
    <input type="button" value="deleteAccount" onclick="deleteAccount()">
    <div id="deleteAccountResult"></div>

    <input type="button" style="background-color: red;" value="logOut" onclick="logOut()">
</body>
</html>
